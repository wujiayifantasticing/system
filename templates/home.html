<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI识别系统 - 智能识别平台</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/common.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/utilities.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 首页蓝色主题样式 */
        .stats-cards {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            flex: 1;
            min-width: 250px;
            background: linear-gradient(135deg, #4361ee, #3a0ca3);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--card-shadow);
            text-align: center;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(67, 97, 238, 0.4);
            background: linear-gradient(135deg, #4895ef, #4361ee);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            color: white;
        }

        .stat-card h3 {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .stat-card p {
            font-size: 32px;
            font-weight: 700;
            color: white;
            margin: 0;
        }

        .features {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 40px 0;
        }

        .feature-card {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
            border-color: #4361ee;
        }

        .feature-icon {
            font-size: 40px;
            color: #4361ee;
            margin-bottom: 15px;
        }

        .feature-title {
            font-size: 20px;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .feature-desc {
            color: var(--gray);
            line-height: 1.6;
        }

        .instruction-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }

        .step {
            flex: 1;
            min-width: 250px;
            text-align: center;
            padding: 20px;
            border-radius: var(--border-radius-sm);
            background: #f8f9fa;
            border-left: 4px solid #4361ee;
            transition: var(--transition);
        }

        .step:hover {
            background: #e6f3ff;
            transform: translateY(-2px);
        }

        .step-number {
            display: inline-block;
            width: 40px;
            height: 40px;
            line-height: 40px;
            background: #4361ee;
            color: white;
            border-radius: 50%;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .step-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .step-desc {
            color: var(--gray);
            font-size: 14px;
        }

        .chart-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--card-shadow);
            margin: 20px auto;
            max-width: 1200px;
            border: 1px solid #e6f3ff;
        }

        .chart-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 20px;
            color: #4361ee;
            font-weight: 600;
        }

        @keyframes countUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 蓝色主题按钮 */
        .btn {
            background: rgba(67, 97, 238, 0.1);
            color: #4361ee;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #4361ee;
            color: white;
            border-color: #4361ee;
        }

        @media (max-width: 768px) {
            .stats-cards {
                flex-direction: column;
            }
            
            .nav-menu {
                flex-wrap: nowrap;
                overflow-x: auto;
                justify-content: flex-start;
                padding-bottom: 10px;
            }
            
            .dropdown {
                flex-shrink: 0;
            }
        }
    </style>
</head>
<body>
    <!-- 头部保持不变，使用base.html的统一头部 -->
    <div class="header">
        <div class="header-content">
            <div class="logo-container">
                <img src="../static/images/logo.jpg" alt="系统Logo" class="logo">
                <h1 class="welcome-text">智能监测系统</h1>
            </div>

            <div class="nav-menu">
                <div class="dropdown">
                    <button class="btn" onclick="location.reload()">
                        <i class="fas fa-home"></i>&nbsp;首页
                    </button>
                </div>

                <div class="dropdown" id="faceRecognitionDropdown">
                    <button class="btn dropdown-btn" onclick="toggleDropdown('faceRecognitionDropdown')">
                        <i class="fas fa-user-circle"></i>&nbsp;人脸识别
                    </button>
                    <div class="dropdown-content">
                        <button class="btn" onclick="navigate('feature')">
                            <i class="fas fa-project-diagram"></i>&nbsp;人脸特征分析
                        </button>
                        <button class="btn" onclick="navigate('compare')">
                            <i class="fas fa-compress-alt"></i>&nbsp;人脸对比
                        </button>
                    </div>
                </div>

                <div class="dropdown" id="aiChatDropdown">
                    <button class="btn dropdown-btn" onclick="toggleDropdown('aiChatDropdown')">
                        <i class="fas fa-robot"></i>&nbsp;AI对话
                    </button>
                    <div class="dropdown-content">
                        <button class="btn" onclick="navigate('chat')">
                            <i class="fas fa-comments"></i>&nbsp;校园问答
                        </button>
                        <button class="btn" onclick="navigate('voice_chat')">
                            <i class="fas fa-microphone-alt"></i>&nbsp;语音聊天
                        </button>
                    </div>
                </div>

                <div class="dropdown" id="speechDropdown">
                    <button class="btn dropdown-btn" onclick="toggleDropdown('speechDropdown')">
                        <i class="fas fa-microphone-alt"></i>&nbsp;语音技术
                    </button>
                    <div class="dropdown-content">
                        <button class="btn" onclick="navigate('speech_recognition')">
                            <i class="fas fa-microphone"></i>&nbsp;语音识别
                        </button>
                        <button class="btn" onclick="navigate('speech_synthesis')">
                            <i class="fas fa-volume-up"></i>&nbsp;语音合成
                        </button>
                        <button class="btn" onclick="navigate('speech_information')">
                            <i class="fas fa-info-circle"></i>&nbsp;语音信息
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="content-container">
        <div class="stats-cards">
            <div class="stat-card">
                <i class="fas fa-users stat-icon"></i>
                <h3>用户量：</h3>
                <p id="userCount">0</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-user-clock stat-icon"></i>
                <h3>今日使用人数：</h3>
                <p id="todayQuestions">0</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-chart-line stat-icon"></i>
                <h3>今日活跃指数：</h3>
                <p id="activeIndex">0</p>
            </div>
        </div>

        <div class="instructions">
            <h2 style="color: #4361ee;">如何使用AI识别系统</h2>
            <div class="instruction-steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-title">选择功能</div>
                    <div class="step-desc">点击上方导航菜单选择您需要的AI功能</div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-title">上传数据</div>
                    <div class="step-desc">根据提示上传图片、语音或文本数据</div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-title">获取结果</div>
                    <div class="step-desc">系统将快速分析并返回识别结果</div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-title">导出使用</div>
                    <div class="step-desc">下载或分享您的分析结果</div>
                </div>
            </div>
        </div>

        <div class="features">
            <div class="feature-card">
                <i class="fas fa-brain feature-icon"></i>
                <h3 class="feature-title">智能AI技术</h3>
                <p class="feature-desc">采用最新深度学习算法，提供高精度的人脸识别、语音处理和文字识别服务。</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-bolt feature-icon"></i>
                <h3 class="feature-title">高效处理</h3>
                <p class="feature-desc">毫秒级响应速度，支持高并发请求，满足校园大规模使用需求。</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-shield-alt feature-icon"></i>
                <h3 class="feature-title">安全可靠</h3>
                <p class="feature-desc">数据加密传输，严格隐私保护，确保用户数据安全无忧。</p>
            </div>
        </div>

        <div class="chart-container">
            <h3 class="chart-title">周使用量统计</h3>
            <div id="weeklyUsageChart" style="width: 100%; height: 350px;"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="{{ url_for('static', filename='js/common.js') }}"></script>
    <script>
        // 模拟数据加载动画
        function animateValue(id, start, end, duration) {
            const obj = document.getElementById(id);
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const value = Math.floor(progress * (end - start) + start);
                obj.innerHTML = value.toLocaleString();
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // 页面加载后执行动画
        document.addEventListener('DOMContentLoaded', function() {
            animateValue("userCount", 0, 12483, 2000);
            animateValue("todayQuestions", 0, 384, 1500);
            animateValue("activeIndex", 0, 96, 1800);

            // 初始化图表
            initChart();
        });

        // 初始化ECharts图表 - 蓝色主题
        function initChart() {
            const chartDom = document.getElementById('weeklyUsageChart');
            const myChart = echarts.init(chartDom);

            const option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                    axisLine: {
                        lineStyle: {
                            color: '#4361ee'
                        }
                    },
                    axisLabel: {
                        color: '#666'
                    }
                },
                yAxis: {
                    type: 'value',
                    axisLine: {
                        show: true,
                        lineStyle: {
                            color: '#4361ee'
                        }
                    },
                    splitLine: {
                        lineStyle: {
                            color: '#f0f0f0'
                        }
                    }
                },
                series: [
                    {
                        name: '使用次数',
                        type: 'bar',
                        data: [120, 200, 150, 80, 70, 110, 130],
                        itemStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: '#4361ee' },
                                { offset: 1, color: '#3a0ca3' }
                            ])
                        },
                        barWidth: '40%'
                    }
                ]
            };

            myChart.setOption(option);

            // 响应窗口大小变化
            window.addEventListener('resize', function() {
                myChart.resize();
            });
        }
    </script>
</body>
</html>